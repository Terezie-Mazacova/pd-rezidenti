var BetJs;$(document).ready(function(){BetJs.Jelly.Frontend.FileJQ.Ini()}),function(e){var l;function s(){return l.appPath+"/admin/appLibs/fileJQ/fileJQLoad.ajax.aspx"}function t(){for(var e=!0,t=$("input.jFile"),n=0;n<t.length;++n){var i=t[n].status;void 0!==i&&0!==i&&1!==i&&(e=!1)}return e}function n(e,t){r(t.fileInput[0].getAttribute("name"),"BetJs: Unspecified error during upload - 701")}function i(e,t){var n,i,a;0<t.files.length&&(1<t.files.length?r(t.fileInput[0].getAttribute("name"),"BetJs: Unspecified error during upload - 702"):t.fileInput&&(function(e){var t=e.fileInput[0].getAttribute("name"),t=$(document.forms[0][t]).closest(".jFileContainer");t.find(".jFileContentButton").hide(),t.find(".jFileContentFile").show();e=e.files[0],e='<span class="fileName">'+e.name+'</span> <span class="fileSize">('+f(e.size)+")</span>";t.find(".jFileName").html(e),t.find(".jFileAction").html('<span class="uploading">'+l.msgs.uploading+"</span>")}(t),n=t.fileInput[0].getAttribute("name"),(i=document.forms[0][n]).status=2,a=(a=t.files[0].fileName)||t.files[0].name,$.ajax({url:s(),data:{action:"startUpload",fileName:a,inputName:n},dataType:"text",success:function(e){i.status=3,i.fileID=e,t.formData={fileID:e,fileName:a},t.submit()},error:function(e){r(n,"BetJs: Unspecified error on upload start - 703")}})))}function a(e){var t=$(e).closest(".jFileContainer"),n=t.find('input[type="file"]')[0].getAttribute("name"),e=document.forms[0][n];t.find(".jFileContentButton").show(),t.find(".jFileContentFile").hide(),e.status=0,document.forms[0][n+"Value"].value=""}function o(e,t){var n=$(e.target).attr("name"),e=$(document.forms[0][n]).closest(".jFileContainer"),n=Math.round(t.loaded/t.total*100),n='<span class="uploading">'+l.msgs.uploading+'</span> <span class="uploadingSize">'+f(t.loaded)+'</span> <span class="uploadingPercentage">('+n+" %)</span>";e.find(".jFileAction").html(n)}function u(e,t){var n,i;Number(t.files[0].size)!==Number(t.result)?r(n=t.fileInput[0].getAttribute("name"),"BetJs: Unspecified error during upload - 704"):(n=t.fileInput[0].getAttribute("name"),i=$(document.forms[0][n]).closest(".jFileContainer"),t='<span class="actionLink" onclick="jfile.RemoveFile(this);">'+l.msgs.delete+"</span>",i.find(".jFileAction").html(t),(t=document.forms[0][n]).status=1,document.forms[0][n+"Value"].value=t.fileID)}function r(e,t){alert(t),a(document.forms[0][e])}function f(e){return e<1022976?Math.floor(Math.max(e/1024,1))+" kB":(e=(e=Math.floor(e/1024/1024*10).toString()).substr(0,e.length-1)+","+e.substring(e.length-1,e.length))+" MB"}e=(e=e.Jelly||(e.Jelly={})).Frontend||(e.Frontend={}),(l=e.FileJQ||(e.FileJQ={})).Ini=function(){$("input.jFile").fileupload({url:s(),maxChunkSize:9e5,add:i,fail:n,progressall:o,done:u}),l.skipOnSubmitEvent||(document.forms[0].onsubmit=function(){return!!t()||(alert(l.msgs.wait),!1)})},l.IsUploadFinished=t,l.RemoveFile=a}(BetJs=BetJs||{});